---
date: 2010-01-27 02:03:15+00:00
layout: post
title: HWIC-3G-GSM
categories:
- Cisco
- Networking
tags:
- '1841'
- Cisco
- wwan
---

It took me quite some time to get this figured out so I thought it would be a good first post to share with you. Configuration took piecing together information from a few different sources; I could not find one definitive answer on how to configure a router with this card. Hopefully somebody will find this information useful. Also, A good reference can be found on Cisco's website [here](http://www.cisco.com/en/US/docs/routers/access/1800/1861/software/feature/guide/3ghwic.html).


Materials:  

	* Cisco 1841 Router  
	* HWIC-3G-GSM  
	* AT&T SIM Card  


Quick Config Breakdown:
(Disclaimer: This is not meant to be a technical guide, for a complete command reference, see Cisco Docs.)

## 1. Configure a Cellular Modem Profile

`router# cellular0/0/0 gsm profile create 1 <apn_name>`

## 2. Configure DDR

```
(config)# chat-script gsm "" "ATDT*99***1#" TIMEOUT 60 "CONNECT"
(config)# dialer-list 1 protocol ip permit
(config)# line 0/0/0
 (config-line)# script dialer gsm
 (config-line)# modem InOut
 (config-line)# transport input all
 (config-line)# exit
```

## 3. Configure the Cellular Interface

```
(config)# interface Cellular0/0/0
 (config-if)# __ip address negotiated
 (config-if)# __encapsulation ppp
 (config-if)# __ dialer in-band
 (config-if)# __ dialer idle-timeout 300
 (config-if)# __ dialer string gsm
 (config-if)# __ dialer-group 1
 (config-if)# __ async mode interactive
 (config-if)# __ ppp chap hostname dummy
 (config-if)# __ ppp chap password dummy
 (config-if)# __ exit
```

From here make sure you have a default route setup and attempt to send some traffic out the Cellular interface with a ping. You should see the interface come up and the pings start succeeding.

Notes:
The chat-script and chap authentication were configured based on information gleamed from AT&T, it will vary from carrier to carrier.

This is merely how I configured my router to work with our AT&T APN. On top of this configuration, add some lines for NAT, a VPN tunnel, and you have yourself a Cellular Enabled Router. Feel free to post any comments or questions.
